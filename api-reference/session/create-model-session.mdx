---
title: "Create Model Session"
api: "POST /api/v1/session/modelsession"
description: "Create a session with a provider using a model ID"
---

Create a session with a provider using a model ID and associate it with the API key.

This endpoint creates a session and automatically associates it with the API key used for authentication. Each API key can have at most one active session at a time. The system will automatically select the best available bid for the specified model.

### Headers

<ParamField header="Authorization" type="string" required>
  API key in format: `Bearer sk-xxxxxx`
</ParamField>

### Query Parameters

<ParamField query="model_id" type="string" required>
  The blockchain ID (hex) of the model to create a session for, e.g., `0x1234...`
</ParamField>

### Body

<ParamField body="sessionDuration" type="integer" default={3600}>
  Duration of the session in seconds
</ParamField>

<ParamField body="directPayment" type="boolean" default={false}>
  Whether to use direct payment instead of allowance
</ParamField>

<ParamField body="failover" type="boolean" default={false}>
  Whether to enable automatic failover to another provider
</ParamField>

### Response

<ResponseField name="session_id" type="string">
  Unique identifier for the created session
</ResponseField>

<ResponseField name="provider" type="string">
  Provider address
</ResponseField>

<ResponseField name="model_id" type="string">
  Model identifier used
</ResponseField>

<ResponseField name="bid_id" type="string">
  Bid identifier that was selected
</ResponseField>

<ResponseField name="duration" type="integer">
  Session duration in seconds
</ResponseField>

<ResponseField name="cost" type="string">
  Total cost for the session
</ResponseField>

<RequestExample>
```bash cURL
curl --request POST \
  --url 'https://api.mor.org/api/v1/session/modelsession?model_id=0x1234567890abcdef' \
  --header 'Authorization: Bearer sk-YOUR_API_KEY' \
  --header 'Content-Type: application/json' \
  --data '{
    "sessionDuration": 3600,
    "directPayment": false,
    "failover": true
  }'
```

```javascript JavaScript
const response = await fetch(
  'https://api.mor.org/api/v1/session/modelsession?model_id=0x1234567890abcdef',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer sk-YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      sessionDuration: 3600,
      directPayment: false,
      failover: true
    })
  }
);

const session = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api.mor.org/api/v1/session/modelsession',
    params={'model_id': '0x1234567890abcdef'},
    headers={
        'Authorization': 'Bearer sk-YOUR_API_KEY',
        'Content-Type': 'application/json'
    },
    json={
        'sessionDuration': 3600,
        'directPayment': False,
        'failover': True
    }
)

session = response.json()
```
</RequestExample>

<ResponseExample>
```json 200 Response
{
  "session_id": "0xabcdef1234567890",
  "provider": "0x9876543210fedcba",
  "model_id": "0x1234567890abcdef",
  "bid_id": "0xfedcba0987654321",
  "duration": 3600,
  "cost": "0.05"
}
```

```json 422 Validation Error
{
  "detail": [
    {
      "loc": ["query", "model_id"],
      "msg": "Field required",
      "type": "missing"
    }
  ]
}
```
</ResponseExample>

<Info>
  **Automatic Bid Selection**: When creating a session by model ID, the gateway automatically selects the best available bid based on price, provider rating, and availability. Use `/api/v1/models/ratedbids?model_id=...` to see all available bids first.
</Info>

<Warning>
  Before creating a session, ensure you have approved sufficient MOR tokens using the `/api/v1/session/approve` endpoint.
</Warning>

<Tip>
  Enable `failover: true` for production applications to automatically switch to another provider if the primary provider becomes unavailable.
</Tip>

